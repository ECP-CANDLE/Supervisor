
= Cross-correlation workflow

== Installation

This installs everything in a Conda location so you can easily remove it later.

----
$ curl -o Anaconda3-5.3.0-Linux-x86_64.sh https://repo.anaconda.com/archive/Anaconda3-5.3.0-Linux-x86_64.sh
# Make the installer executable
$ chmod u+x ./Anaconda3-5.3.0-Linux-x86_64.sh
# Run the installer, accepting the defaults.
$ ./Anaconda3-5.3.0-Linux-x86_64.sh
# Manually update your path
$ export PATH=$HOME/anaconda3/bin:$PATH
$ conda create -n candle python=3.6
$ conda activate candle
# Install Swift/T
$ conda install scipy pandas
$ conda install -c lightsource2-tag swift-t
----

== Quick start

----
# Create the DB if you haven't already
$ python db-init.py
# Run the workflow
$ ./xcorr.sh
# Kill it with Ctrl-C after ~10 seconds
# View what you generated
$ export PYTHONPATH=$PWD
$ python list-records.py
record:   1
time:     2019-01-24 14:48:11
filename: ./test_data/NCI60_GDSC_400_50_features.txt
features:
studies:  NCI60, GDSC

record:   2
time:     2019-01-24 14:48:11
filename: ./test_data/CCLE_CTRP_400_100_features.txt
features:
studies:  CCLE, CTRP
...
----

== File index

+make-fake-studies.sh+::

Creates fake study data in +studies/+

+xcorr-psuedo.swift+::

Original cross-correlation pseudocode

+xcorr.swift+::

Translation of +xcorr-psuedo.swift+ into runnable workflow

+xcorr.py+::

Implementation of the cross-correlation application functionality

+uno_xcorr.py+::

Cross-correlation functionality specialized for Uno benchmark compatible data

+xcorr_db.py+::

DB related functionality for xcorr logging

== Database

=== Quick start

----
# Create the DB
$ python db-init.py
# Is it there?
$ ls xcorr.db
xcorr.db
# Check that the table is there w/o Python:
# (This requires APT sqlite3 or equivalent)
$ sqlite3
sqlite> .open xcorr.db
sqlite> .tables
records
sqlite> .schema records
CREATE TABLE records(
       time timestamp,
       metadata varchar(1024));
sqlite> (Ctrl-D to exit)
# Insert some dummy data:
$ python db-insert-junk.py
# View that data:
$ sqlite3 xcorr.db "select * from records;"
2019-01-09 14:22:08|0
2019-01-09 14:22:08|1
2019-01-09 14:22:08|2
...
# To start over, just:
$ rm xcorr.db
----

Run all the commands above:
----
$ ./run
----
